import{useMemo as g,useState as h,useEffect as y,useCallback as f}from"react";function m(e){if(!e||typeof e!="string")return console.warn("Invalid cookie key provided"),null;try{let o=`${e}=`,t=decodeURIComponent(document.cookie).split("; ").find(d=>d.startsWith(o));if(!t)return null;let r=t.substring(o.length);try{return JSON.parse(r)}catch{return r}}catch(o){return console.error("Error retrieving cookie:",o),null}}function T(e,o,c){if(!e||typeof e!="string"){console.error("Invalid cookie key provided");return}let{daysUntilExpiration:n=0,sameSite:t="Strict",secure:r=!1,path:d="/",domain:s}=c??{};try{let a=encodeURIComponent(typeof o=="string"?o:JSON.stringify(o)),p=[`${e}=${a}`,`path=${d}`,t&&`SameSite=${t}`,r&&"Secure",s&&`domain=${s}`];if(n>0){let l=new Date(Date.now()+n*24*60*60*1e3);p.push(`expires=${l.toUTCString()}`)}document.cookie=p.filter(Boolean).join("; ")}catch(a){console.error("Error setting cookie:",a)}}function C(e,o){if(!e||typeof e!="string"){console.error("Invalid cookie key provided");return}let{path:c="/",domain:n}=o??{};try{let t=[`${e}=`,"expires=Thu, 01 Jan 1970 00:00:00 GMT",`path=${c}`,n&&`domain=${n}`,"Secure"];document.cookie=t.filter(Boolean).join("; ")}catch(t){console.error("Error removing cookie:",t)}}function $(e,o,c){let{initializeWithValue:n=!0,...t}=c??{},r=o&&typeof o=="object",[d,s]=h(o);y(()=>{let i=m(e);i?s(r?u=>({...u,...i}):i):o&&n&&T(e,o,t)},[]);let a=f(i=>{r?s(u=>{let k={...u,...i};return T(e,k,t),k}):(T(e,i,t),s(i))},[t,r,e]),p=f((i,u)=>{r&&a({[i]:u})},[r,a]),l=f(i=>{s(i??o),C(e)},[o,e]);return g(()=>({state:d,setState:a,setField:p,resetState:l}),[l,p,a,d])}export{$ as useCookies};
